<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PPDB Online - Satu Halaman</title>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      background: linear-gradient(to right, #e0f7fa, #ffffff);
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    h1, h2, h3 {
      color: #00796b;
      text-align: center;
    }
    .form-section {
      background: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input, select, button, textarea {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button {
      background: #00796b;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover { background: #004d40; }
    .hidden { display: none; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: left;
    }
    .info {
      background: #e0f2f1;
      padding: 15px;
      border-left: 5px solid #00796b;
      margin-bottom: 20px;
    }
    .success {
      background: #c8e6c9;
      padding: 20px;
      border-left: 5px solid #388e3c;
    }
    .contact {
      background: #f1f8e9;
      padding: 15px;
      border-left: 5px solid #689f38;
      margin-top: 30px;
    }
    .action-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
      margin-bottom: 0px;
    }
    .action-buttons button {
      width: auto;
      padding: 8px 16px;
      margin-bottom: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>PPDB Online</h1>

    <!-- Login Form -->
    <div id="loginForm" class="form-section">
      <h2>Login</h2>
      <label for="loginUsername">Username:</label>
      <input type="text" id="loginUsername">

      <label for="loginPassword">Password:</label>
      <input type="password" id="loginPassword">

      <button onclick="loginUser()">Login</button>
      <p>Belum punya akun? <a href="#" onclick="toggleForms(true)">Registrasi</a></p>
    </div>

    <!-- Registrasi Form -->
    <div id="registerForm" class="form-section hidden">
      <h2>Registrasi</h2>
      <label for="regUsername">Username:</label>
      <input type="text" id="regUsername">

      <label for="regPassword">Password:</label>
      <input type="password" id="regPassword">

      <button onclick="registerUser()">Daftar</button>
      <p>Sudah punya akun? <a href="#" onclick="toggleForms(false)">Login</a></p>
    </div>

    <!-- Formulir Pendaftaran -->
    <div id="formPendaftaran" class="form-section hidden">
      <h2>Formulir Pendaftaran</h2>
      <label>Nama Lengkap:</label>
      <input type="text" id="nama">

      <label>NISN:</label>
      <input type="text" id="nisn">

      <label>Asal Sekolah:</label>
      <input type="text" id="sekolah">

      <label>Alamat:</label>
      <textarea id="alamat"></textarea>

      <label>Nomor HP:</label>
      <input type="text" id="telepon">

      <label>Jurusan:</label>
      <select id="jurusan">
        <option value="TKJ">TKJ</option>
        <option value="RPL">RPL</option>
        <option value="MM">MM</option>
      </select>

      <label>Gelombang Pendaftaran:</label>
      <select id="gelombang" onchange="showGelombangInfo()">
        <option value="1">Gelombang 1</option>
        <option value="2">Gelombang 2</option>
      </select>

      <div id="gelombangInfo" class="info"></div>

      <button onclick="kirimFormulir()">Kirim Formulir</button>
    </div>

    <!-- Validasi Data Siswa -->
    <div id="validasiSiswa" class="form-section hidden">
      <h2>Validasi Data Anda</h2>
      <div class="info">Silakan cek kembali data di bawah ini. Jika ada yang salah, klik <b>Edit Data</b>. Jika sudah benar, klik <b>Konfirmasi</b>.</div>
      <table>
        <tr><th>Nama</th><td id="vNama"></td></tr>
        <tr><th>NISN</th><td id="vNISN"></td></tr>
        <tr><th>Sekolah Asal</th><td id="vSekolah"></td></tr>
        <tr><th>Alamat</th><td id="vAlamat"></td></tr>
        <tr><th>Telepon</th><td id="vTelepon"></td></tr>
        <tr><th>Jurusan</th><td id="vJurusan"></td></tr>
        <tr><th>Gelombang</th><td id="vGelombang"></td></tr>
      </table>
      <div class="action-buttons">
        <button onclick="editFormulir()">Edit Data</button>
        <button onclick="konfirmasiData()">Konfirmasi</button>
      </div>
    </div>

    <!-- Data Siswa -->
    <div id="dataSiswa" class="form-section hidden">
      <h2>Data Anda</h2>
      <table>
        <tr><th>Nama</th><td id="tNama"></td></tr>
        <tr><th>NISN</th><td id="tNISN"></td></tr>
        <tr><th>Sekolah Asal</th><td id="tSekolah"></td></tr>
        <tr><th>Alamat</th><td id="tAlamat"></td></tr>
        <tr><th>Telepon</th><td id="tTelepon"></td></tr>
        <tr><th>Jurusan</th><td id="tJurusan"></td></tr>
        <tr><th>Gelombang</th><td id="tGelombang"></td></tr>
      </table>
      <div class="action-buttons">
        <button onclick="lihatData()">Lihat Lagi</button>
        <button onclick="editFormulir()">Edit Data</button>
      </div>
    </div>

    <!-- Pengumuman -->
    <div id="pengumuman" class="form-section hidden">
      <h2>Pengumuman Kelulusan</h2>
      <div class="success">
        <p>üéâ Selamat! Anda dinyatakan <strong>LULUS</strong> seleksi PPDB tahun ini.</p>
        <p>Berikut data siswa yang lulus:</p>
        <ul id="daftarLulus"></ul>
      </div>
      <div class="contact">
        <h3>Informasi & Kontak Panitia</h3>
        <p>üìç Alamat: Jl. Pendidikan No. 123, Yogyakarta</p>
        <p>üìû Telp: 0812-3456-7890</p>
        <p>‚úâÔ∏è Email: ppdb@sekolah.sch.id</p>
        <p>üåê Website: www.sekolah.sch.id</p>
        <p><strong>PPDB Gelombang 1:</strong> 1 Mei - 30 Juni. Biaya lebih murah, kuota terbatas, prioritas prestasi.</p>
        <p><strong>PPDB Gelombang 2:</strong> 1 Juli - 31 Agustus. Kuota sisa, terbuka untuk semua jalur.</p>
      </div>
    </div>
  </div>

  <script>
    let currentUser = null;
    const users = { admin: "123" };
    // Data pengumuman (siswa yang lulus)
    let siswaLulus = JSON.parse(localStorage.getItem("siswaLulus")) || [];

    function toggleForms(showRegister) {
      document.getElementById("loginForm").classList.toggle("hidden", showRegister);
      document.getElementById("registerForm").classList.toggle("hidden", !showRegister);
    }

    function loginUser() {
      const user = document.getElementById("loginUsername").value;
      const pass = document.getElementById("loginPassword").value;
      if (users[user] === pass) {
        currentUser = user;
        document.getElementById("loginForm").classList.add("hidden");
        document.getElementById("formPendaftaran").classList.remove("hidden");

        // Jika ada data sebelumnya, tampilkan
        const data = JSON.parse(localStorage.getItem("dataSiswa"));
        if (data) tampilkanData(data);
      } else {
        alert("Username atau password salah!");
      }
    }

    function registerUser() {
      const user = document.getElementById("regUsername").value;
      const pass = document.getElementById("regPassword").value;
      if (user && pass) {
        users[user] = pass;
        alert("Registrasi berhasil. Silakan login.");
        toggleForms(false);
      } else {
        alert("Semua kolom wajib diisi!");
      }
    }

    function showGelombangInfo() {
      const val = document.getElementById("gelombang").value;
      const el = document.getElementById("gelombangInfo");
      el.innerHTML = val === "1"
        ? "<strong>Gelombang 1:</strong> 1 Mei - 30 Juni. Biaya masuk lebih ringan, jalur prestasi, kuota terbatas."
        : "<strong>Gelombang 2:</strong> 1 Juli - 31 Agustus. Jalur reguler, kuota tergantung sisa.";
    }

    function kirimFormulir() {
      const nama = document.getElementById("nama").value;
      const nisn = document.getElementById("nisn").value;
      const sekolah = document.getElementById("sekolah").value;
      const alamat = document.getElementById("alamat").value;
      const telepon = document.getElementById("telepon").value;
      const jurusan = document.getElementById("jurusan").value;
      const gelombang = document.getElementById("gelombang").value;

      if (!nama || !nisn || !sekolah || !alamat || !telepon) {
        alert("Semua kolom wajib diisi!");
        return;
      }

      const data = { nama, nisn, sekolah, alamat, telepon, jurusan, gelombang };
      localStorage.setItem("dataSiswa", JSON.stringify(data));

      // Tampilkan validasi
      tampilkanValidasiData(data);

      document.getElementById("formPendaftaran").classList.add("hidden");
      document.getElementById("validasiSiswa").classList.remove("hidden");
    }

    function tampilkanValidasiData(data) {
      document.getElementById("vNama").textContent = data.nama;
      document.getElementById("vNISN").textContent = data.nisn;
      document.getElementById("vSekolah").textContent = data.sekolah;
      document.getElementById("vAlamat").textContent = data.alamat;
      document.getElementById("vTelepon").textContent = data.telepon;
      document.getElementById("vJurusan").textContent = data.jurusan;
      document.getElementById("vGelombang").textContent = `Gelombang ${data.gelombang}`;
    }

    function editFormulir() {
      // Ambil data dari localStorage lalu isi kembali form
      const data = JSON.parse(localStorage.getItem("dataSiswa"));
      if (!data) return;
      document.getElementById("nama").value = data.nama;
      document.getElementById("nisn").value = data.nisn;
      document.getElementById("sekolah").value = data.sekolah;
      document.getElementById("alamat").value = data.alamat;
      document.getElementById("telepon").value = data.telepon;
      document.getElementById("jurusan").value = data.jurusan;
      document.getElementById("gelombang").value = data.gelombang;
      showGelombangInfo();

      document.getElementById("validasiSiswa").classList.add("hidden");
      document.getElementById("dataSiswa").classList.add("hidden");
      document.getElementById("formPendaftaran").classList.remove("hidden");
    }

    function konfirmasiData() {
      // Setelah validasi, masukkan ke daftar lulus dan tampilkan dataSiswa & pengumuman
      const data = JSON.parse(localStorage.getItem("dataSiswa"));
      if (!data) return;
      // Hanya tambahkan jika belum ada nama di daftar lulus
      if (!siswaLulus.some(nama => nama === data.nama)) {
        siswaLulus.push(data.nama);
        localStorage.setItem("siswaLulus", JSON.stringify(siswaLulus));
      }
      tampilkanData(data);
      tampilkanDaftarLulus();
      document.getElementById("validasiSiswa").classList.add("hidden");
      document.getElementById("dataSiswa").classList.remove("hidden");
      document.getElementById("pengumuman").classList.remove("hidden");
    }

    function tampilkanData(data) {
      document.getElementById("tNama").textContent = data.nama;
      document.getElementById("tNISN").textContent = data.nisn;
      document.getElementById("tSekolah").textContent = data.sekolah;
      document.getElementById("tAlamat").textContent = data.alamat;
      document.getElementById("tTelepon").textContent = data.telepon;
      document.getElementById("tJurusan").textContent = data.jurusan;
      document.getElementById("tGelombang").textContent = `Gelombang ${data.gelombang}`;
    }

    function tampilkanDaftarLulus() {
      const daftar = document.getElementById("daftarLulus");
      daftar.innerHTML = "";
      siswaLulus.forEach(n => {
        const li = document.createElement("li");
        li.textContent = n;
        daftar.appendChild(li);
      });
    }

    function lihatData() {
      const data = JSON.parse(localStorage.getItem("dataSiswa"));
      if (data) {
        tampilkanData(data);
        document.getElementById("dataSiswa").classList.remove("hidden");
        document.getElementById("pengumuman").classList.remove("hidden");
        document.getElementById("formPendaftaran").classList.add("hidden");
        document.getElementById("validasiSiswa").classList.add("hidden");
      } else {
        alert("Data tidak ditemukan.");
      }
    }

    // Saat reload, tampilkan daftar lulus di pengumuman
    window.onload = function() {
      tampilkanDaftarLulus();
    }
  </script>
</body>
</html>
